(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{712:function(t,e,a){"use strict";a.r(e);var s=a(44),n=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"create-interactive-real-time-experiences-with-unity-revit-and-rhino"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#create-interactive-real-time-experiences-with-unity-revit-and-rhino"}},[t._v("#")]),t._v(" Create Interactive Real-Time Experiences with Unity, Revit and Rhino")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("NOTE ‚ùóÔ∏è")]),t._v(" "),a("p",[t._v("All our tutorials have been migrated to out tutorials portal!\nCheck them out üëâ "),a("a",{attrs:{href:"https://speckle.systems/tutorials/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Tutorials"),a("OutboundLink")],1)])]),t._v(" "),a("blockquote",[a("p",[a("strong",[t._v("Level:")]),t._v(" Advanced")]),t._v(" "),a("p",[a("strong",[t._v("Author:")]),t._v(" Matteo")]),t._v(" "),a("p",[a("strong",[t._v("Software used:")]),t._v(" Unity, Revit 2021, Rhino 6-7")])]),t._v(" "),a("p",[t._v("In this tutorial we will create an interactive Unity app that renders Revit data in real time. We'll see how the Unity connector works and how to write custom code that pulls data from Speckle that originates in Revit and Rhino. We'll also see how to work with streams and branches to organize data.")]),t._v(" "),a("div",{staticStyle:{position:"relative","padding-bottom":"56.25%"}},[a("iframe",{staticStyle:{position:"absolute"},attrs:{width:"100%",height:"100%",src:"https://www.youtube.com/embed/VEipv8XzPdI",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""}})]),t._v(" "),a("p",[t._v("The Unity Connector is evolving fast üèÉ‚Äç‚ôÇÔ∏è! To follow this tutorial it is recommended that you pull the version at the start commit as future versions might be different.")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/specklesystems/speckle-unity/commit/3526e8eba769caa8c62f1a9e497952f4839f29fe",target:"_blank",rel:"noopener noreferrer"}},[t._v("Start commit"),a("OutboundLink")],1),t._v(" - use this if you want to follow along with this tutorial.")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/specklesystems/speckle-unity/commit/4241e4a619d078be0c8da7265c5999b646565f6f",target:"_blank",rel:"noopener noreferrer"}},[t._v("End commit"),a("OutboundLink")],1),t._v(" - the finished version, if you just want to skip to the end!")])]),t._v(" "),a("h2",{attrs:{id:"preparing-the-models"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#preparing-the-models"}},[t._v("#")]),t._v(" Preparing the Models")]),t._v(" "),a("p",[t._v("The Unity app we are writing will let users receive (download) into their scene any model they have available in their Speckle account.")]),t._v(" "),a("h3",{attrs:{id:"in-revit"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#in-revit"}},[t._v("#")]),t._v(" In Revit")]),t._v(" "),a("p",[t._v("Assuming you don't already have a model, let's go ahead and set one up. We'll be using the "),a("em",[t._v("most boring model ever")]),t._v(", the Revit Basic Sample File - of course, you can use a different project!")]),t._v(" "),a("p",[t._v("You can also just "),a("a",{attrs:{href:"https://drive.google.com/file/d/18UK-aJFzjFEn-Gys_qGFfp9X4HwToNUr/view?usp=sharing",target:"_blank",rel:"noopener noreferrer"}},[t._v("download a copy of the model"),a("OutboundLink")],1),t._v(" with the required edits already applied.")]),t._v(" "),a("p",[a("img",{attrs:{src:"img/image-20210417180122622.png",alt:""}})]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("If using a Revit model, you'll need to "),a("strong",[t._v("edit the door families so that they are open")]),t._v(", this will let you walk through the model instead of just... slamming into it!")])]),t._v(" "),a("p",[t._v("We'll use this model for a walkthrough, but we'll want to let the users dynamically replace some of its components. In this case, I decided "),a("strong",[t._v("the big fireplace in the living room")]),t._v(" is a good candidate. Let's go:")]),t._v(" "),a("ul",[a("li",[t._v("Select it")]),t._v(" "),a("li",[t._v("Open the Revit Connector")]),t._v(" "),a("li",[t._v("Create a new stream and then a new branch named 'fireplace'")]),t._v(" "),a("li",[t._v("Click on "),a("em",[t._v("0 objects")]),t._v(" and then "),a("em",[t._v("Set selection")])]),t._v(" "),a("li",[t._v("Now click "),a("em",[t._v("send")])])]),t._v(" "),a("p",[a("img",{attrs:{src:"img/tutorial-unity-sending.gif",alt:""}})]),t._v(" "),a("p",[t._v("Now let's "),a("strong",[t._v("delete the fireplace and send the entire model")]),t._v(":")]),t._v(" "),a("ul",[a("li",[t._v("Delete the fireplace")]),t._v(" "),a("li",[t._v("Select the entire model")]),t._v(" "),a("li",[t._v("Select the "),a("em",[t._v("main")]),t._v(" branch")]),t._v(" "),a("li",[t._v("Set the selection again and click send")])]),t._v(" "),a("h3",{attrs:{id:"in-rhino"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#in-rhino"}},[t._v("#")]),t._v(" In Rhino")]),t._v(" "),a("p",[t._v('We\'ll use Rhino to create some alternative "furniture" to use instead of the fireplace, here you can get creative!')]),t._v(" "),a("p",[t._v("It's important that this new geometries are located exactly where the fireplace is, so first receive that by using the Grasshopper or Rhino connectors and use it as a base to align the other objects you're creating.")]),t._v(" "),a("p",[t._v("You can download the two geometries I'm using "),a("a",{attrs:{href:"https://drive.google.com/file/d/1dvG_CBB4l7Zc14lCA1UGBr6ruNWSZP0G/view?usp=sharing",target:"_blank",rel:"noopener noreferrer"}},[t._v("from this Rhino 7 file"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("Remember to set your desired materials on the objects before sending them.")])]),t._v(" "),a("p",[t._v("Now we can "),a("strong",[t._v("send both the bunny and the statue to the same stream we created in Revit, but each in its own branch")]),t._v(".")]),t._v(" "),a("p",[a("img",{attrs:{src:"img/tutorial-unity-rhino.gif",alt:""}})]),t._v(" "),a("h3",{attrs:{id:"in-the-3d-viewer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#in-the-3d-viewer"}},[t._v("#")]),t._v(" In the 3D Viewer")]),t._v(" "),a("p",[t._v("If you've followed all the steps correctly, this is what you should have when viewing the stream online.")]),t._v(" "),a("p",[a("img",{attrs:{src:"img/tutorial-unity-viewer-1618681212999.gif",alt:""}})]),t._v(" "),a("h2",{attrs:{id:"writing-the-unity-app"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#writing-the-unity-app"}},[t._v("#")]),t._v(" Writing the Unity App")]),t._v(" "),a("h3",{attrs:{id:"preparing-the-scene"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#preparing-the-scene"}},[t._v("#")]),t._v(" Preparing the Scene")]),t._v(" "),a("p",[t._v("Back in Unity, we can start to work off the "),a("em",[t._v("SpecklePlayground")]),t._v(" scene.")]),t._v(" "),a("p",[t._v("We'll need to add a first-person controller. I downloaded "),a("a",{attrs:{href:"https://assetstore.unity.com/packages/tools/input-management/mini-first-person-controller-174710",target:"_blank",rel:"noopener noreferrer"}},[t._v("this simple one from the asset store"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("p",[t._v("We can then disable or delete any other game objects not needed for this tutorial:")]),t._v(" "),a("p",[a("img",{attrs:{src:"img/image-20210417192529071.png",alt:""}})]),t._v(" "),a("p",[t._v("I've also enabled Global Illumination to make everything look nicer.")]),t._v(" "),a("h3",{attrs:{id:"adding-custom-logic"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#adding-custom-logic"}},[t._v("#")]),t._v(" Adding Custom Logic")]),t._v(" "),a("p",[t._v("Since most of the logic to receive streams and to create UI components already exists in the scene, we just need to add a small script.")]),t._v(" "),a("p",[t._v("Create a "),a("code",[t._v("Tutorial.cs")]),t._v(" file with the following content:")]),t._v(" "),a("div",{staticClass:"language-csharp line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-csharp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("using")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("UnityEngine")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Tutorial")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token type-list"}},[a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MonoBehaviour")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("bool")])]),t._v(" _uiMode "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("GameObject")]),t._v(" UI"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("GameObject")]),t._v(" Controller"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CanvasGroup")]),t._v(" _canvas"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MonoBehaviour")]),t._v(" _cameraScript"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token return-type class-name"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Start")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    _canvas "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" UI"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token generic-method"}},[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("GetComponent")]),a("span",{pre:!0,attrs:{class:"token generic class-name"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("CanvasGroup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    _canvas"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("alpha "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.5f")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    _cameraScript "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Controller"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token generic-method"}},[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("GetComponentInChildren")]),a("span",{pre:!0,attrs:{class:"token generic class-name"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("FirstPersonLook"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token return-type class-name"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Update")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Input"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("GetKeyDown")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("KeyCode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("E"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      _uiMode "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("_uiMode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      _cameraScript"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("enabled "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("_uiMode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      _canvas"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("alpha "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" _uiMode "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("?")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.5f")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      Cursor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("lockState "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" _uiMode "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("?")]),t._v(" CursorLockMode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("None "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" CursorLockMode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Locked"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br"),a("span",{staticClass:"line-number"},[t._v("26")]),a("br"),a("span",{staticClass:"line-number"},[t._v("27")]),a("br"),a("span",{staticClass:"line-number"},[t._v("28")]),a("br"),a("span",{staticClass:"line-number"},[t._v("29")]),a("br"),a("span",{staticClass:"line-number"},[t._v("30")]),a("br")])]),a("p",[t._v("This example script enables and disables "),a("em",[t._v("edit mode")]),t._v(" upon pressing of the "),a("code",[t._v("E")]),t._v(" key.")]),t._v(" "),a("p",[t._v("Create a new game object and attach the script above to it. That's it - your app is now complete üòÉ")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v('Please Note: When adding a receiver, if you leave "Auto Receive" checked, the geometry will be automatically updated as soon as a new commit is pushed to that stream/branch.')])]),t._v(" "),a("h3",{attrs:{id:"further-developments"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#further-developments"}},[t._v("#")]),t._v(" Further Developments")]),t._v(" "),a("p",[t._v("This app is an oversimplification of what a proper interactive real time app would look like... but it's a great starting point!")]),t._v(" "),a("p",[t._v("The UI and logic can be completely customized. A good starting point for this would be looking into the "),a("code",[t._v("SpeckleExamples.cs")]),t._v(" class or the prefabs used for the UI components.")]),t._v(" "),a("p",[t._v("For instance, you could perform different actions when the data is received or consume the Revit metadata attached to the objects with a script. Instead of having the stream cards custom for a UI, custom buttons could be added to pull a specific commit and model.")])])}),[],!1,null,null,null);e.default=n.exports}}]);