(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{683:function(e,s,t){"use strict";t.r(s);var a=t(44),n=Object(a.a)({},(function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"deploying-a-server-manual-setup"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#deploying-a-server-manual-setup"}},[e._v("#")]),e._v(" Deploying a Server - manual setup")]),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("IMPORTANT")]),e._v(" "),t("p",[e._v("We offer a free server that you can use straight away (create accounts, etc.).")]),e._v(" "),t("p",[e._v("We can also help you manage your Server deployments (setting things up securely, automatic upgrades, support, etc)")]),e._v(" "),t("p",[e._v("See "),t("a",{attrs:{href:"https://speckle.systems/getstarted/",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://speckle.systems/getstarted/"),t("OutboundLink")],1),e._v(" for more details on our offerings.")])]),e._v(" "),t("p",[e._v("If you want to run your own instance, there are multiple ways to achieve this:")]),e._v(" "),t("ul",[t("li",[e._v("The easiest way is to use our precompiled releases that are available as docker images on Docker Hub.")]),e._v(" "),t("li",[e._v("If you want to deploy the Server with your own modifications, you should build your own docker images (instructions below).")]),e._v(" "),t("li",[e._v("Also, you can run the Server with local development tools needed for each package (requires development knowledge)")])]),e._v(" "),t("h3",{attrs:{id:"dependencies"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dependencies"}},[e._v("#")]),e._v(" Dependencies")]),e._v(" "),t("p",[e._v("The Speckle server needs two services available over the network:")]),e._v(" "),t("ul",[t("li",[e._v("PostgreSQL (tested with v12 and v13)")]),e._v(" "),t("li",[e._v("Redis")])]),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),t("p",[e._v("Both PostgreSQL and Redis are included in the following deployment instructions, so "),t("strong",[e._v("you don't need to install them manually")]),e._v(".")]),e._v(" "),t("p",[e._v("You can also install them manually or use a managed deployment from a cloud provider (Azure, AWS, DigitalOcean, etc). Setting them up manually is out of scope of this article.")])]),e._v(" "),t("h2",{attrs:{id:"run-in-a-virtual-machine"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#run-in-a-virtual-machine"}},[e._v("#")]),e._v(" Run in a Virtual Machine")]),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("IMPORTANT")]),e._v(" "),t("p",[e._v("This setup is not recommended for use in production for a few reasons, namely:")]),e._v(" "),t("ul",[t("li",[e._v("application level updates: we tend to move quite fast, and if things get busy, blink twice and you’re on an outdated server. this has security implications too.")]),e._v(" "),t("li",[e._v("guaranteed uptime: from our experience, vm’s tend to restart now and then (they need updates and reboots too), which results in downtime.")]),e._v(" "),t("li",[e._v("database backups - again this is up to you mostly on what’s your risk appetite when it comes to dealing with live data. We’re a bit more on the paranoid side, so we’ve set up replication, failover nodes and PITR.")]),e._v(" "),t("li",[e._v("end-to-end encryption: possibly less of daily concern - we’re offering from encryption at rest, to https security (SSL/TLS certs & renewal) - so whenever data travels between a client and the db it’s always encrypted, inc. inside the datacenter itself.")]),e._v(" "),t("li",[e._v("automatic scalability: for example, the preview service can be quite a monster; that setup can eat up all a vm’s resources, and starve other processes causing general system wide instability.")])]),e._v(" "),t("p",[e._v("If you need help deploying a production server, "),t("a",{attrs:{href:"https://speckle.systems/getstarted/",target:"_blank",rel:"noopener noreferrer"}},[e._v("we can help"),t("OutboundLink")],1),e._v("!")])]),e._v(" "),t("p",[e._v("This is the easiest way to get the Server running.")]),e._v(" "),t("p",[e._v("As prerequisites, you only need a Linux VM with at least 4 GB of RAM and have "),t("a",{attrs:{href:"https://docs.docker.com/engine/install/ubuntu/#install-using-the-convenience-script",target:"_blank",rel:"noopener noreferrer"}},[e._v("Docker"),t("OutboundLink")],1),e._v(" and "),t("a",{attrs:{href:"https://docs.docker.com/compose/install/#install-compose-on-linux-systems",target:"_blank",rel:"noopener noreferrer"}},[e._v("Docker Compose"),t("OutboundLink")],1),e._v(" installed.")]),e._v(" "),t("h4",{attrs:{id:"step-1-create-a-directory-for-this-deployment-on-the-system"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#step-1-create-a-directory-for-this-deployment-on-the-system"}},[e._v("#")]),e._v(" Step 1: Create a directory for this deployment on the system:")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("# mkdir /opt/speckle/\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("h4",{attrs:{id:"step-2-copy-and-paste-this-into-a-file-named-docker-compose-yml-in-your-directory"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#step-2-copy-and-paste-this-into-a-file-named-docker-compose-yml-in-your-directory"}},[e._v("#")]),e._v(" Step 2: Copy and paste this into a file named "),t("code",[e._v("docker-compose.yml")]),e._v(" in your directory:")]),e._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("version")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"2"')]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("services")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("####")]),e._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Speckle Server dependencies")]),e._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#######")]),e._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("postgres")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"postgres:13.1-alpine"')]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("restart")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" always\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("environment")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("POSTGRES_DB")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" speckle\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("POSTGRES_USER")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" speckle\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("POSTGRES_PASSWORD")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" speckle\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("volumes")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" ./postgres"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v("data"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("/var/lib/postgresql/data/\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("ports")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"127.0.0.1:5432:5432"')]),e._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("redis")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"redis:6.0-alpine"')]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("restart")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" always\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("volumes")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" ./redis"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v("data"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("/data\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("ports")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"127.0.0.1:6379:6379"')]),e._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("####")]),e._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Speckle Server")]),e._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#######")]),e._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("speckle-frontend")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" speckle/speckle"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v("frontend"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("2")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("restart")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" always\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("ports")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"0.0.0.0:80:80"')]),e._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("speckle-server")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" speckle/speckle"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v("server"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("2")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("restart")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" always\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("command")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"bash"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"-c"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"/wait && node bin/www"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("environment")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n      "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# TODO: Change this to the URL of the speckle server, as accessed from the network")]),e._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("CANONICAL_URL")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"http://localhost"')]),e._v("\n\n      "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# TODO: Change this to a unique secret for this server")]),e._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("SESSION_SECRET")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"TODO:ReplaceWithLongString"')]),e._v("\n\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("STRATEGY_LOCAL")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"true"')]),e._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("DEBUG")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"speckle:*"')]),e._v("\n\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("POSTGRES_URL")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"postgres"')]),e._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("POSTGRES_USER")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"speckle"')]),e._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("POSTGRES_PASSWORD")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"speckle"')]),e._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("POSTGRES_DB")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"speckle"')]),e._v("\n\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("REDIS_URL")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"redis://redis"')]),e._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("WAIT_HOSTS")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" postgres"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("5432")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" redis"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("6379")]),e._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("preview-service")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" speckle/speckle"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v("preview"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v("service"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("2")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("restart")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" always\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("mem_limit")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"1000m"')]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("memswap_limit")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"1000m"')]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("command")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"bash"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"-c"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"/wait && node bin/www"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("environment")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("DEBUG")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"preview-service:*"')]),e._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("PG_CONNECTION_STRING")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"postgres://speckle:speckle@postgres/speckle"')]),e._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("WAIT_HOSTS")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" postgres"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("5432")]),e._v("\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br"),t("span",{staticClass:"line-number"},[e._v("7")]),t("br"),t("span",{staticClass:"line-number"},[e._v("8")]),t("br"),t("span",{staticClass:"line-number"},[e._v("9")]),t("br"),t("span",{staticClass:"line-number"},[e._v("10")]),t("br"),t("span",{staticClass:"line-number"},[e._v("11")]),t("br"),t("span",{staticClass:"line-number"},[e._v("12")]),t("br"),t("span",{staticClass:"line-number"},[e._v("13")]),t("br"),t("span",{staticClass:"line-number"},[e._v("14")]),t("br"),t("span",{staticClass:"line-number"},[e._v("15")]),t("br"),t("span",{staticClass:"line-number"},[e._v("16")]),t("br"),t("span",{staticClass:"line-number"},[e._v("17")]),t("br"),t("span",{staticClass:"line-number"},[e._v("18")]),t("br"),t("span",{staticClass:"line-number"},[e._v("19")]),t("br"),t("span",{staticClass:"line-number"},[e._v("20")]),t("br"),t("span",{staticClass:"line-number"},[e._v("21")]),t("br"),t("span",{staticClass:"line-number"},[e._v("22")]),t("br"),t("span",{staticClass:"line-number"},[e._v("23")]),t("br"),t("span",{staticClass:"line-number"},[e._v("24")]),t("br"),t("span",{staticClass:"line-number"},[e._v("25")]),t("br"),t("span",{staticClass:"line-number"},[e._v("26")]),t("br"),t("span",{staticClass:"line-number"},[e._v("27")]),t("br"),t("span",{staticClass:"line-number"},[e._v("28")]),t("br"),t("span",{staticClass:"line-number"},[e._v("29")]),t("br"),t("span",{staticClass:"line-number"},[e._v("30")]),t("br"),t("span",{staticClass:"line-number"},[e._v("31")]),t("br"),t("span",{staticClass:"line-number"},[e._v("32")]),t("br"),t("span",{staticClass:"line-number"},[e._v("33")]),t("br"),t("span",{staticClass:"line-number"},[e._v("34")]),t("br"),t("span",{staticClass:"line-number"},[e._v("35")]),t("br"),t("span",{staticClass:"line-number"},[e._v("36")]),t("br"),t("span",{staticClass:"line-number"},[e._v("37")]),t("br"),t("span",{staticClass:"line-number"},[e._v("38")]),t("br"),t("span",{staticClass:"line-number"},[e._v("39")]),t("br"),t("span",{staticClass:"line-number"},[e._v("40")]),t("br"),t("span",{staticClass:"line-number"},[e._v("41")]),t("br"),t("span",{staticClass:"line-number"},[e._v("42")]),t("br"),t("span",{staticClass:"line-number"},[e._v("43")]),t("br"),t("span",{staticClass:"line-number"},[e._v("44")]),t("br"),t("span",{staticClass:"line-number"},[e._v("45")]),t("br"),t("span",{staticClass:"line-number"},[e._v("46")]),t("br"),t("span",{staticClass:"line-number"},[e._v("47")]),t("br"),t("span",{staticClass:"line-number"},[e._v("48")]),t("br"),t("span",{staticClass:"line-number"},[e._v("49")]),t("br"),t("span",{staticClass:"line-number"},[e._v("50")]),t("br"),t("span",{staticClass:"line-number"},[e._v("51")]),t("br"),t("span",{staticClass:"line-number"},[e._v("52")]),t("br"),t("span",{staticClass:"line-number"},[e._v("53")]),t("br"),t("span",{staticClass:"line-number"},[e._v("54")]),t("br"),t("span",{staticClass:"line-number"},[e._v("55")]),t("br"),t("span",{staticClass:"line-number"},[e._v("56")]),t("br"),t("span",{staticClass:"line-number"},[e._v("57")]),t("br"),t("span",{staticClass:"line-number"},[e._v("58")]),t("br"),t("span",{staticClass:"line-number"},[e._v("59")]),t("br"),t("span",{staticClass:"line-number"},[e._v("60")]),t("br"),t("span",{staticClass:"line-number"},[e._v("61")]),t("br"),t("span",{staticClass:"line-number"},[e._v("62")]),t("br"),t("span",{staticClass:"line-number"},[e._v("63")]),t("br"),t("span",{staticClass:"line-number"},[e._v("64")]),t("br"),t("span",{staticClass:"line-number"},[e._v("65")]),t("br"),t("span",{staticClass:"line-number"},[e._v("66")]),t("br")])]),t("h4",{attrs:{id:"step-3-edit-the-fields-marked-with-todo"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#step-3-edit-the-fields-marked-with-todo"}},[e._v("#")]),e._v(" Step 3: Edit the fields marked with "),t("code",[e._v("TODO")])]),e._v(" "),t("p",[e._v("Make sure to edit the file and change")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("CANONICAL_URL")]),e._v(" to the url used to access this speckle server. This can be "),t("code",[e._v("http://[PUBLIC_IP]")]),e._v(" or "),t("code",[e._v("http://[DOMAIN_NAME]")])]),e._v(" "),t("li",[e._v("For added security, change the "),t("code",[e._v("SESSION_SECRET")]),e._v(" to a unique secret value for this deployment.")])]),e._v(" "),t("p",[e._v("The server also supports some other environment variables. You can see them in our "),t("a",{attrs:{href:"https://github.com/specklesystems/speckle-server/blob/main/packages/server/.env-example",target:"_blank",rel:"noopener noreferrer"}},[e._v(".env-example file from the git repo"),t("OutboundLink")],1),e._v(".")]),e._v(" "),t("h4",{attrs:{id:"step-4-start-the-server-and-the-dependencies"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#step-4-start-the-server-and-the-dependencies"}},[e._v("#")]),e._v(" Step 4: Start the Server and the dependencies")]),e._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# cd /opt/speckle")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# docker-compose up -d")]),e._v("\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br")])]),t("p",[e._v("This will:")]),e._v(" "),t("ul",[t("li",[e._v("Run PostgreSQL inside docker, with data files stored in "),t("code",[e._v("/opt/speckle/postgres-data/")])]),e._v(" "),t("li",[e._v("Run Redis inside docker, with data files stored in "),t("code",[e._v("/opt/speckle/redis-data/")])]),e._v(" "),t("li",[e._v("Run the Server component, configured for this environment.")]),e._v(" "),t("li",[e._v("Run the Frontend component, exposing port 80 to the network the VM is in.")])]),e._v(" "),t("p",[e._v("All containers, except the frontend, are not accessible from outside the VM.")]),e._v(" "),t("p",[e._v("All containers automatically start at system startup (so if the VM gets rebooted, the Server will automatically start)")]),e._v(" "),t("h2",{attrs:{id:"run-in-a-vm-without-dependencies"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#run-in-a-vm-without-dependencies"}},[e._v("#")]),e._v(" Run in a VM without dependencies")]),e._v(" "),t("p",[e._v("If you plan to run PostgreSQL and Redis separately, for example as managed deployments by a cloud provider (DigitalOcean, AWS, Azure, etc), you can follow the same instructions as above, but with this simplified "),t("code",[e._v("docker-compose.yml")]),e._v(" file:")]),e._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("version")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"2"')]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("services")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("speckle-frontend")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" speckle/speckle"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v("frontend"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("2")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("restart")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" always\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("ports")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"0.0.0.0:80:80"')]),e._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("speckle-server")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" speckle/speckle"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v("server"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("2")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("restart")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" always\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("environment")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n      "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# TODO: Change this to the URL of the speckle server, as accessed from the network")]),e._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("CANONICAL_URL")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"http://localhost"')]),e._v("\n\n      "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# TODO: Change this to a unique secret for this server")]),e._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("SESSION_SECRET")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"TODO:ReplaceWithLongString"')]),e._v("\n\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("STRATEGY_LOCAL")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"true"')]),e._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("DEBUG")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"speckle:*"')]),e._v("\n\n      "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# TODO: Change to PostgreSQL connection details:")]),e._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("POSTGRES_URL")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"postgres"')]),e._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("POSTGRES_USER")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"speckle"')]),e._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("POSTGRES_PASSWORD")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"speckle"')]),e._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("POSTGRES_DB")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"speckle"')]),e._v("\n      \n      "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# TODO: Change to redis connection string:")]),e._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("REDIS_URL")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"redis://redis"')]),e._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("preview-service")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" speckle/speckle"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v("preview"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v("service"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("2")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("restart")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" always\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("mem_limit")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"1000m"')]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("memswap_limit")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"1000m"')]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("environment")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("DEBUG")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"preview-service:*"')]),e._v("\n      \n      "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# TODO: Change to PostgreSQL connection string:")]),e._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("PG_CONNECTION_STRING")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"postgres://speckle:speckle@postgres/speckle"')]),e._v("\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br"),t("span",{staticClass:"line-number"},[e._v("7")]),t("br"),t("span",{staticClass:"line-number"},[e._v("8")]),t("br"),t("span",{staticClass:"line-number"},[e._v("9")]),t("br"),t("span",{staticClass:"line-number"},[e._v("10")]),t("br"),t("span",{staticClass:"line-number"},[e._v("11")]),t("br"),t("span",{staticClass:"line-number"},[e._v("12")]),t("br"),t("span",{staticClass:"line-number"},[e._v("13")]),t("br"),t("span",{staticClass:"line-number"},[e._v("14")]),t("br"),t("span",{staticClass:"line-number"},[e._v("15")]),t("br"),t("span",{staticClass:"line-number"},[e._v("16")]),t("br"),t("span",{staticClass:"line-number"},[e._v("17")]),t("br"),t("span",{staticClass:"line-number"},[e._v("18")]),t("br"),t("span",{staticClass:"line-number"},[e._v("19")]),t("br"),t("span",{staticClass:"line-number"},[e._v("20")]),t("br"),t("span",{staticClass:"line-number"},[e._v("21")]),t("br"),t("span",{staticClass:"line-number"},[e._v("22")]),t("br"),t("span",{staticClass:"line-number"},[e._v("23")]),t("br"),t("span",{staticClass:"line-number"},[e._v("24")]),t("br"),t("span",{staticClass:"line-number"},[e._v("25")]),t("br"),t("span",{staticClass:"line-number"},[e._v("26")]),t("br"),t("span",{staticClass:"line-number"},[e._v("27")]),t("br"),t("span",{staticClass:"line-number"},[e._v("28")]),t("br"),t("span",{staticClass:"line-number"},[e._v("29")]),t("br"),t("span",{staticClass:"line-number"},[e._v("30")]),t("br"),t("span",{staticClass:"line-number"},[e._v("31")]),t("br"),t("span",{staticClass:"line-number"},[e._v("32")]),t("br"),t("span",{staticClass:"line-number"},[e._v("33")]),t("br"),t("span",{staticClass:"line-number"},[e._v("34")]),t("br"),t("span",{staticClass:"line-number"},[e._v("35")]),t("br"),t("span",{staticClass:"line-number"},[e._v("36")]),t("br"),t("span",{staticClass:"line-number"},[e._v("37")]),t("br"),t("span",{staticClass:"line-number"},[e._v("38")]),t("br"),t("span",{staticClass:"line-number"},[e._v("39")]),t("br"),t("span",{staticClass:"line-number"},[e._v("40")]),t("br")])]),t("h2",{attrs:{id:"run-your-speckle-server-fork"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#run-your-speckle-server-fork"}},[e._v("#")]),e._v(" Run your speckle-server fork")]),e._v(" "),t("p",[e._v("If you made some changes to the server and want to run those instead of the official releases, we created some useful docker-compose .yml files to help with that.")]),e._v(" "),t("h4",{attrs:{id:"step-1-set-up-dependencies"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#step-1-set-up-dependencies"}},[e._v("#")]),e._v(" Step 1: Set up dependencies")]),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),t("p",[e._v("If you set up PostgreSQL or Redis outside of this VM (for example a managed deployment from a cloud provider), you can skip this step, but remember to set up the correct environment variables later")])]),e._v(" "),t("p",[e._v("To get the PostgreSQL and Redis dependencies up and running in the VM, our git repo contains\n"),t("a",{attrs:{href:"https://github.com/specklesystems/speckle-server/blob/main/docker-compose-deps.yml",target:"_blank",rel:"noopener noreferrer"}},[e._v("a docker-compose file"),t("OutboundLink")],1),e._v("\nfor running these dependencies locally in docker containers.")]),e._v(" "),t("p",[e._v("It also includes "),t("code",[e._v("PGAdmin")]),e._v(" and "),t("code",[e._v("redis-insight")]),e._v(" to be able to explore the raw data. If you don't need them, you can safely remove those entries from the "),t("code",[e._v("docker-compose-deps.yml")]),e._v(" file.")]),e._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("$ "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("PATH_TO_SPECKLE-SERVER_REPOSITORY"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n$ docker-compose -f docker-compose-deps.yml up -d\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br")])]),t("p",[e._v("This will run the following containers, and will automatically launch them at system startup:")]),e._v(" "),t("ul",[t("li",[t("em",[e._v("PostgreSQL v13")]),e._v(", listening only on "),t("code",[e._v("127.0.0.1:5432")]),e._v(" with default credentials "),t("code",[e._v("speckle")]),e._v(":"),t("code",[e._v("speckle")]),e._v(" and a database named "),t("code",[e._v("speckle")]),e._v(".")]),e._v(" "),t("li",[t("em",[e._v("Redis v6")]),e._v(", listening only on "),t("code",[e._v("127.0.0.1:6379")])]),e._v(" "),t("li",[t("em",[e._v("PGAdmin4")]),e._v(", listening only on "),t("code",[e._v("127.0.0.1:16543")]),e._v(" with default credentials "),t("code",[e._v("admin@localhost")]),e._v(" : "),t("code",[e._v("admin")])]),e._v(" "),t("li",[t("em",[e._v("Redis Insight")]),e._v(", listening only on "),t("code",[e._v("127.0.0.1:8001")])])]),e._v(" "),t("p",[e._v("All of the above containers listen on the local loopback interface ("),t("code",[e._v("127.0.0.1")]),e._v(") and are NOT accessible from the local network (for security, since they use default credentials)")]),e._v(" "),t("p",[e._v("To use PGAdmin, after login you can configure a server connection to the host "),t("code",[e._v("postgres")]),e._v(" (user "),t("code",[e._v("speckle")]),e._v(", password "),t("code",[e._v("speckle")]),e._v(", database "),t("code",[e._v("speckle")]),e._v(")")]),e._v(" "),t("p",[e._v("To use Redis Insight, you can configure it to connect to the hostname "),t("code",[e._v("redis")]),e._v(" (port "),t("code",[e._v("6379")]),e._v(")")]),e._v(" "),t("p",[e._v("Docker-compose creates named docker volumes for storing data for each of the containers, so data is persisted.\nYou can view existing docker volumes with "),t("code",[e._v("docker volume ls")]),e._v(" and delete a volume and existing data with "),t("code",[e._v("docker volume rm [volume_name]")])]),e._v(" "),t("h4",{attrs:{id:"step-2-build-and-run-your-code"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#step-2-build-and-run-your-code"}},[e._v("#")]),e._v(" Step 2: Build and run your code")]),e._v(" "),t("p",[e._v("The git repository contains "),t("a",{attrs:{href:"https://github.com/specklesystems/speckle-server/blob/main/docker-compose-speckle.yml",target:"_blank",rel:"noopener noreferrer"}},[e._v("a docker-compose file"),t("OutboundLink")],1),e._v(" for building and running the Speckle server frontend and backend in docker containers.")]),e._v(" "),t("p",[e._v("To use it, first edit the variables in the "),t("code",[e._v("docker-compose-speckle.yml")]),e._v(" file to reflect your environment. Then, you can start them with:")]),e._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("$ "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("PATH_TO_SPECKLE-SERVER_REPOSITORY"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n$ docker-compose -f docker-compose-speckle.yml up --build -d\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br")])]),t("p",[e._v("(You can safely ignore the warnings about the "),t("em",[e._v("orphan containers")]),e._v(")")]),e._v(" "),t("p",[e._v("This will run the following containers, and will automatically launch them at system startup:")]),e._v(" "),t("ul",[t("li",[t("em",[e._v("speckle-frontend")]),e._v(", an nginx container that serves the Vue app build as static files (exposed on port 80 in the VM network) and proxies server requests to the "),t("code",[e._v("speckle-server")]),e._v(" container")]),e._v(" "),t("li",[t("em",[e._v("speckle-server")]),e._v(", the "),t("code",[e._v("server")]),e._v(" component that doesn't expose any port outside the internal docker network.")]),e._v(" "),t("li",[t("em",[e._v("preview-service")]),e._v(", the "),t("code",[e._v("preview-service")]),e._v(" component that doesn't expose any port outside the internal docker network.")])]),e._v(" "),t("h2",{attrs:{id:"run-in-development-mode"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#run-in-development-mode"}},[e._v("#")]),e._v(" Run in development mode")]),e._v(" "),t("p",[e._v("This is the recommended method for developing or debugging the Speckle Server locally.")]),e._v(" "),t("p",[e._v("If you plan to give others access to your Server instance, consider running it with production settings in a dedicated virtual machine (see previous section)")]),e._v(" "),t("p",[e._v("To run the Speckle Server, you need to run:")]),e._v(" "),t("ul",[t("li",[e._v("the "),t("code",[e._v("frontend")]),e._v(" package (see "),t("a",{attrs:{href:"https://github.com/specklesystems/speckle-server/tree/main/packages/frontend",target:"_blank",rel:"noopener noreferrer"}},[e._v("the readme.md file in the git repo"),t("OutboundLink")],1),e._v(")")]),e._v(" "),t("li",[e._v("the "),t("code",[e._v("server")]),e._v(" package (see "),t("a",{attrs:{href:"https://github.com/specklesystems/speckle-server/tree/main/packages/server",target:"_blank",rel:"noopener noreferrer"}},[e._v("the readme.md file in the git repo"),t("OutboundLink")],1),e._v(")")])]),e._v(" "),t("p",[e._v("Optionally, to enable object previews for the frontend, you can also run:")]),e._v(" "),t("ul",[t("li",[e._v("the "),t("code",[e._v("preview-service")]),e._v(" package (see "),t("a",{attrs:{href:"https://github.com/specklesystems/speckle-server/tree/main/packages/preview-service",target:"_blank",rel:"noopener noreferrer"}},[e._v("the readme.md file in the git repo"),t("OutboundLink")],1),e._v(")")])]),e._v(" "),t("p",[e._v("Detailed instructions for running them locally are kept up to date in their respective readme.md files.")]),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("IMPORTANT")]),e._v(" "),t("p",[e._v("Don't forget to set up the variables in the "),t("code",[e._v(".env")]),e._v(" file according to your deployment. You can get started by copying the "),t("code",[e._v(".env-example")]),e._v(" file to "),t("code",[e._v(".env")]),e._v(" and then edit it.")])]),e._v(" "),t("p",[e._v("In this deployment type, the frontend Vue app will listen by default on the local interface (not available over the network) on "),t("code",[e._v("port 8080")]),e._v(", but will have no knowledge about the "),t("code",[e._v("server")]),e._v(" component, and thus "),t("strong",[e._v("should not be accessed directly")]),e._v(".")]),e._v(" "),t("p",[e._v("The server component will listen on the local interface (not available over the network) on "),t("code",[e._v("port 3000")]),e._v(", and will proxy the frontend requests to the frontend component (as configured in .env file).")]),e._v(" "),t("p",[e._v("The optional "),t("code",[e._v("preview-service")]),e._v(" component has an internal express app that listens only on the local interface on "),t("code",[e._v("port 3001")])]),e._v(" "),t("p",[e._v("You can access Speckle Web from your browser at "),t("a",{attrs:{href:"http://localhost:3000/",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://localhost:3000/"),t("OutboundLink")],1),e._v(".")]),e._v(" "),t("p",[e._v("If you plan to access the development server over the network, you should update the "),t("code",[e._v("CANONICAL_URL")]),e._v(" variable in the .env file to the URL that is used to access the server, and also set the "),t("code",[e._v("BIND_ADDRESS")]),e._v(" env variable to "),t("code",[e._v("0.0.0.0")]),e._v(".")])])}),[],!1,null,null,null);s.default=n.exports}}]);